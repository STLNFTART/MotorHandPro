# Mosquitto MQTT Broker Configuration for MotorHandPro

# Persistence
persistence true
persistence_location /mosquitto/data/

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true
connection_messages true

# Network Listeners
# Port 1883 - MQTT (unencrypted)
listener 1883
protocol mqtt

# Port 9001 - WebSocket (for browser clients)
listener 9001
protocol websockets

# Authentication
allow_anonymous false
password_file /mosquitto/config/passwd

# ACLs (Access Control Lists)
# Uncomment and configure for production
# acl_file /mosquitto/config/acl.conf

# Message size limits
max_packet_size 0
message_size_limit 0

# Connection limits
max_connections -1
max_queued_messages 1000

# Keep alive settings
max_keepalive 65535

# Persistence settings
autosave_interval 300
autosave_on_changes false
persistent_client_expiration 1h

# Queue settings
max_inflight_messages 20
max_queued_bytes 0

# Logging detail
log_type debug
log_type subscribe
log_type unsubscribe

# Retained messages
retained_persistence true

# System monitoring topics ($SYS)
sys_interval 10
